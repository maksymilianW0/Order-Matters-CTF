<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <title>Lista postów</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}" type="text/css" />
</head>
<body>
    <!-- 
      CTF Hint:
      Możesz manipulować parametrem "sort" w URL, 
      by odkryć, co kryje się za listą postów.
      Spróbuj różnych wartości, ale uważaj na filtry!
      ZWRÓĆ UWAGĘ NA POSTY!!!!
    -->
    <h1>Lista postów</h1>
    <h3>Witaj, {{ username }}! Twoja rola to {{ role }}<h3>

    <form method="get" action="/posts" class="sort-form">
        <select name="sort" aria-label="Sortuj posty">
            <option value="id">Sortuj po ID</option>
            <option value="title">Sortuj po tytule</option>
            <option value="author">Sortuj po autorze</option>
        </select>
        <button type="submit">Sortuj</button>
    </form>

    {% for row in rows %}
    <article class="post">
        <div class="post-title">{{ row[1] }}</div>
        <div class="post-author">Autor: {{ row[2] }}</div>
        <div class="post-id" style="display:none;">ID: {{ row[0] }}</div>
    </article>
    {% endfor %}

    <div class="footer">© 2025 CTF Challenge</div>
</body>
</html>
